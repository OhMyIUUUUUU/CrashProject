# AccessPoint - Complete Feature Flowchart

## ğŸ“Š Application Feature Flowchart

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APP LAUNCH (index.tsx)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Check Auth     â”‚
                    â”‚ Status         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                         â”‚
                â–¼                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Has Session?  â”‚         â”‚ No Session?   â”‚
        â”‚ (Logged In)   â”‚         â”‚ (Not Logged)  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                         â”‚
                â”‚                         â–¼
                â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                 â”‚  Login Screen â”‚
                â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                         â”‚
                â”‚                         â–¼
                â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                 â”‚  Register?    â”‚
                â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                         â”‚
                â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚            â”‚                         â”‚
                â”‚            â–¼                         â–¼
                â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚    â”‚ Register Form â”‚         â”‚ Login Submit   â”‚
                â”‚    â”‚ (Multi-step)  â”‚         â”‚ (Email/Phone)  â”‚
                â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚            â”‚                         â”‚
                â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                         â”‚
                â”‚                         â–¼
                â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                 â”‚ Auth Success? â”‚
                â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                         â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Home Screen   â”‚
                    â”‚  (Tab Nav)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Home Tab     â”‚   â”‚  Report Tab   â”‚   â”‚  Profile Tab   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HOME SCREEN FEATURES                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Network Check (NetInfo)                           â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Connected? â†’ Continue                          â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Offline? â†’ Redirect to OfflineEmergency      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Active Case Check (useActiveCase hook)            â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Query tbl_reports (status: pending/responding)â”‚   â”‚
â”‚  â”‚  â”œâ”€â†’ Real-time subscription (Supabase)             â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Display Active Case Banner if exists          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  SOS Button (Emergency Report)                      â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ User Presses SOS                               â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Check Active Case First                        â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Has Active Case? â†’ Open Chat               â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ No Active Case? â†’ Continue                â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ 3-Second Countdown (Cancelable)                â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Request Location Permission                    â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Get GPS Coordinates                            â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Reverse Geocode Address                        â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Create Report in tbl_reports                   â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ category: "Emergency"                      â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ description: "SOS Emergency"               â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ status: "pending"                          â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ latitude/longitude                         â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ reporter_id                                â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Upload to Supabase                              â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Show Active Case Banner                         â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Auto-open ChatScreen                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Active Case Banner (if activeCase exists)         â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Display Case Details                          â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Category                                   â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Status (pending/responding)               â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Assigned Office (if assigned)              â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Timestamp                                 â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Cancel Report Button (5s countdown)          â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Delete report + messages + media          â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Chat Button â†’ Navigate to ChatScreen          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  FloatingChatHead (Draggable Message Icon)          â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Only visible on Home screen                    â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Only visible if activeCase exists              â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Draggable with PanResponder                    â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Edge snapping (left/right)                 â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Tap detection (vs drag)                    â”‚    â”‚
â”‚  â”‚  â””â”€â†’ On Tap â†’ Navigate to ChatScreen                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REPORT SCREEN FEATURES                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Report Form                                        â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Category Selection (HexagonalGrid)             â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Violence, Threat, Theft, Vandalism         â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Suspicious, Emergency, Other               â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Pre-filled description template           â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Role Selection                                 â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Victim                                    â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Witness                                   â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Description Input (TextArea)                    â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Image Attachments (ImagePicker)                â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Request Media Library Permission           â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Pick Images/Videos                         â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Upload to Supabase Storage                 â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Submit Button                                  â”‚    â”‚
â”‚  â”‚      â”œâ”€â†’ Disabled if activeCase exists             â”‚    â”‚
â”‚  â”‚      â”œâ”€â†’ Enabled if no activeCase                   â”‚    â”‚
â”‚  â”‚      â””â”€â†’ Create Report â†’ Show Active Case Banner    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Active Case Display (if activeCase exists)        â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Show Case Details                              â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Disable Submit Button                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHAT SYSTEM FEATURES                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ChatScreen (Database-Connected)                   â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Load Messages from tbl_messages               â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Filter by report_id                       â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Order by timestamp                        â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Real-time Subscription                        â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Listen to tbl_messages changes            â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Auto-update UI on new messages            â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Send Message                                  â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Insert into tbl_messages                  â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ sender_id: user_id                        â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ sender_type: "user"                       â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ receiver_id: assigned_office_id          â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ message_content                           â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Message Display                               â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ User messages (right-aligned)              â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Office messages (left-aligned)            â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Auto-scroll to bottom                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Chat Access Points                                â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ SOS Button â†’ Auto-opens ChatScreen            â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ FloatingChatHead â†’ Navigate to ChatScreen     â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Active Case Banner â†’ Navigate to ChatScreen    â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Notifications â†’ Navigate to ChatScreen        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROFILE SCREEN FEATURES                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  User Profile Display                               â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Personal Information                           â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Name, Email, Phone                         â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Date of Birth, Gender                      â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Profile Picture                            â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Emergency Contact                              â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Name, Phone Number                         â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Relationship                               â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Address Information                            â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Province, City, Barangay                   â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Street Address                             â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Edit Profile Button                            â”‚    â”‚
â”‚  â”‚      â””â”€â†’ Update in Supabase + AsyncStorage          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Logout                                             â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Clear Supabase Session                         â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Clear AsyncStorage                             â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Redirect to Login                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  OFFLINE MODE FEATURES                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Network Monitoring (Global)                        â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ NetInfo.addEventListener                       â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Detects Connection Loss                       â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Auto-redirect to OfflineEmergency             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  OfflineEmergency Screen                            â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Emergency Services                             â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Call 911 (Linking.openURL)                 â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Call Police (Linking.openURL)              â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Call Fire (Linking.openURL)                â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Call Medical (Linking.openURL)             â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ SMS Emergency                                  â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Get GPS Location                           â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Get User Profile (AsyncStorage)            â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Format SMS with Location + User Info       â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Send SMS (Linking.openURL)                 â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Personal Emergency Contact                     â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Call Emergency Contact                     â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ SMS Emergency Contact                      â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ SOS Button (Offline)                           â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Same UI as Online SOS                      â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Neumorphic Design                          â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Action Sheet (Call/Message 911)            â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Connection Monitor                             â”‚    â”‚
â”‚  â”‚      â”œâ”€â†’ Auto-redirect to Home when connected       â”‚    â”‚
â”‚  â”‚      â””â”€â†’ Show Connection Status                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  NOTIFICATION FEATURES                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Notification Service (Notifee)                       â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Initialize on App Start                        â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Request Permissions                             â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Create Android Channel                         â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Show Welcome Notification                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Notification Listeners                             â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Foreground Events                              â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ onForegroundEvent                          â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Handle Notification Tap                    â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Background Events                              â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ onBackgroundEvent                          â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ backgroundHandler.ts                       â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Initial Notification                           â”‚    â”‚
â”‚  â”‚      â””â”€â†’ getInitialNotification                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Notifications Screen                                â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Case History                                   â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Fetch from tbl_reports                     â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Filter: pending/assigned/investigating    â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ resolved/closed                            â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Order by updated_at                        â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Display Case List                              â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Category, Status, Timestamp                â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Tap â†’ Navigate to ChatScreen               â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Real-time Updates                              â”‚    â”‚
â”‚  â”‚      â””â”€â†’ Supabase Subscription                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ACTIVE CASE MANAGEMENT FEATURES                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  useActiveCase Hook                                â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ checkActiveCase()                             â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Query tbl_reports                         â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Filter: status = pending/responding       â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Set activeCase state                      â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ checkNotifications()                          â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Query tbl_reports                         â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Filter: pending/assigned/investigating   â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ resolved/closed                           â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Set notifications state                   â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ cancelReport()                                â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Delete from tbl_messages                  â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Delete media from Storage                 â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Delete from tbl_reports                   â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Refresh activeCase                        â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Real-time Subscription                        â”‚    â”‚
â”‚  â”‚      â”œâ”€â†’ Listen to tbl_reports changes             â”‚    â”‚
â”‚  â”‚      â””â”€â†’ Auto-refresh on status change             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Case Status Flow                                   â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ pending â†’ Active Case Banner                  â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ responding â†’ Active Case Banner               â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ assigned â†’ Move to Notifications              â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ investigating â†’ Move to Notifications         â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ resolved â†’ Move to Notifications              â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ closed â†’ Move to Notifications                â”‚    â”‚
â”‚  â”‚  â””â”€â†’ cancelled â†’ Remove from Active Case           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AUTHENTICATION FLOW                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Login Process                                     â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ User enters Email/Phone + Password            â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Validate Input                                â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Supabase Auth Sign In                         â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ On Success:                                   â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Save Session to AsyncStorage              â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Load User Data from tbl_users             â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Redirect to Home                          â”‚    â”‚
â”‚  â”‚  â””â”€â†’ On Error: Show Error Message                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Registration Process                              â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Multi-step Form                               â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Step 1: Personal Info                      â”‚    â”‚
â”‚  â”‚  â”‚   â”‚   â”œâ”€â†’ First/Last Name                        â”‚    â”‚
â”‚  â”‚  â”‚   â”‚   â”œâ”€â†’ Email, Phone                          â”‚    â”‚
â”‚  â”‚  â”‚   â”‚   â”œâ”€â†’ Date of Birth                         â”‚    â”‚
â”‚  â”‚  â”‚   â”‚   â””â”€â†’ Gender                                â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Step 2: Emergency Contact                 â”‚    â”‚
â”‚  â”‚  â”‚   â”‚   â”œâ”€â†’ Name, Phone                           â”‚    â”‚
â”‚  â”‚  â”‚   â”‚   â””â”€â†’ Relationship                          â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Step 3: Address                           â”‚    â”‚
â”‚  â”‚  â”‚   â”‚   â”œâ”€â†’ Province (SearchablePicker)           â”‚    â”‚
â”‚  â”‚  â”‚   â”‚   â”œâ”€â†’ City (SearchablePicker)               â”‚    â”‚
â”‚  â”‚  â”‚   â”‚   â”œâ”€â†’ Barangay (SearchablePicker)           â”‚    â”‚
â”‚  â”‚  â”‚   â”‚   â””â”€â†’ Street Address                        â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Step 4: Security                          â”‚    â”‚
â”‚  â”‚  â”‚       â”œâ”€â†’ Password                              â”‚    â”‚
â”‚  â”‚  â”‚       â””â”€â†’ Confirm Password                     â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Supabase Auth Sign Up                         â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Create User in tbl_users                      â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Save to AsyncStorage                          â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Redirect to Home                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  AuthContext                                        â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ Manages Global Auth State                     â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ loadUser()                                    â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Check AsyncStorage                        â”‚    â”‚
â”‚  â”‚  â”‚   â”œâ”€â†’ Check Supabase Session                    â”‚    â”‚
â”‚  â”‚  â”‚   â””â”€â†’ Load from tbl_users                       â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ login()                                       â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ register()                                    â”‚    â”‚
â”‚  â”‚  â””â”€â†’ logout()                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA STORAGE FLOW                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Supabase (Backend)                                  â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ tbl_users (User Profiles)                       â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ tbl_reports (Emergency Reports)                 â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ tbl_messages (Chat Messages)                    â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ tbl_media (Report Attachments)                  â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Real-time Subscriptions                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  AsyncStorage (Local)                               â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ @user_data (User Session)                      â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ @is_logged_in (Auth Status)                    â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Offline Fallback                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Supabase Storage                                    â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ crash-media bucket                             â”‚    â”‚
â”‚  â”‚  â”œâ”€â†’ reports/ folder                                â”‚    â”‚
â”‚  â”‚  â””â”€â†’ Image/Video Files                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”‘ Key Features Summary

### 1. **Authentication & User Management**
- Login with Email/Phone + Password
- Multi-step Registration (Personal Info, Emergency Contact, Address, Security)
- Session Management (Supabase + AsyncStorage)
- Profile Viewing & Editing
- Logout

### 2. **Emergency Reporting**
- **SOS Button**: Quick emergency report with GPS location
- **Report Form**: Detailed incident reporting with categories
- **Category Selection**: Violence, Threat, Theft, Vandalism, Suspicious, Emergency, Other
- **Image Attachments**: Upload photos/videos to Supabase Storage
- **Role Selection**: Victim or Witness

### 3. **Active Case Management**
- Real-time Active Case Detection
- Active Case Banner Display
- Case Status Tracking (pending, responding, assigned, investigating, resolved, closed)
- Cancel Report Functionality (with media cleanup)
- Auto-refresh on Status Changes

### 4. **Chat System**
- Database-connected Chat (tbl_messages)
- Real-time Message Updates (Supabase Subscriptions)
- Message History Loading
- Send/Receive Messages with Assigned Office
- Auto-scroll to Latest Message
- Multiple Access Points (SOS, FloatingChatHead, Active Case Banner)

### 5. **Offline Mode**
- Network Connectivity Monitoring (NetInfo)
- Auto-redirect to OfflineEmergency Screen
- Emergency Service Calls (911, Police, Fire, Medical)
- SMS Emergency with Location & User Info
- Personal Emergency Contact Access
- Connection Restoration Detection

### 6. **Notifications**
- Push Notification Setup (Notifee)
- Permission Management
- Foreground/Background Event Handling
- Notification Tap Navigation
- Case History Display
- Real-time Case Updates

### 7. **UI/UX Features**
- Draggable FloatingChatHead (with edge snapping)
- Neumorphic SOS Button Design
- Pulsing Animations
- Active Case Banner (only on Home screen)
- Custom Tab Bar Navigation
- Loading States & Error Handling

### 8. **Location Services**
- GPS Location Retrieval (Expo Location)
- Reverse Geocoding (Address from Coordinates)
- Location Permission Management
- Location in Emergency Reports

## ğŸ”„ Real-time Features

1. **Report Status Updates**: Real-time subscription to `tbl_reports`
2. **Chat Messages**: Real-time subscription to `tbl_messages`
3. **Active Case Monitoring**: Automatic refresh on status changes
4. **Network Monitoring**: Global connectivity detection

## ğŸ“± Screen Navigation Flow

```
index.tsx
  â”œâ”€â†’ Login (if not authenticated)
  â””â”€â†’ Home (if authenticated)
      â”œâ”€â†’ Home Tab
      â”‚   â”œâ”€â†’ SOS Button â†’ ChatScreen
      â”‚   â”œâ”€â†’ FloatingChatHead â†’ ChatScreen
      â”‚   â””â”€â†’ Active Case Banner â†’ ChatScreen
      â”œâ”€â†’ Report Tab
      â”‚   â””â”€â†’ Submit Report â†’ Active Case Created
      â”œâ”€â†’ Profile Tab
      â”‚   â””â”€â†’ View/Edit Profile
      â””â”€â†’ Notifications Tab
          â””â”€â†’ Case History â†’ ChatScreen
```

## ğŸ¯ User Journeys

### Journey 1: Emergency SOS
1. User opens app â†’ Home Screen
2. User presses SOS Button
3. 3-second countdown (can cancel)
4. Location captured â†’ Report created
5. Active Case Banner appears
6. Auto-opens ChatScreen
7. User communicates with assigned office
8. Case resolved â†’ Moved to Notifications

### Journey 2: Detailed Report
1. User navigates to Report Tab
2. Selects Category â†’ Fills Description â†’ Adds Images
3. Submits Report â†’ Active Case Created
4. View Active Case Banner â†’ Open Chat
5. Communicate with Assigned Office
6. Case Resolved â†’ Moved to Notifications

### Journey 3: Offline Emergency
1. Network disconnection detected
2. Auto-redirect to OfflineEmergency Screen
3. Access Emergency Services:
   - Call Police/Fire/Medical
   - Send SMS with Location
   - Call Personal Emergency Contact
4. Connection restored â†’ Auto-redirect to Home

---

**This flowchart documents all features implemented in the AccessPoint application.**

